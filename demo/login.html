<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>ÄÄƒng nháº­p â€” MusicWave</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/login.css">
  </head>
  <body>
    <div class="notes">
      <i class="fa-solid fa-music note n1"></i>
      <i class="fa-solid fa-music note n2"></i>
      <i class="fa-solid fa-music note n3"></i>
      <i class="fa-solid fa-music note n4"></i>
    </div>

    <main class="card">
      
      <section class="brand-side">
        <div>
          <div class="logo-text">MusicWave</div>
          <p style="color: rgba(255,255,255,0.7); font-size: 14px;">Ã‚m nháº¡c cho má»i cáº£m xÃºc</p>
        </div>

        <div class="vinyl-container">
          <div class="vinyl">
            <div class="vinyl-label"></div>
          </div>
        </div>

        <div class="brand-footer">
          <p>"KhÃ´ng chá»‰ lÃ  nghe nháº¡c, Ä‘Ã³ lÃ  phong cÃ¡ch sá»‘ng. ÄÄƒng nháº­p Ä‘á»ƒ khÃ¡m phÃ¡ tháº¿ giá»›i cá»§a riÃªng báº¡n."</p>
        </div>
      </section>

      <section class="form-side">
        <div class="form-header">
          <h2>Xin chÃ o,</h2>
          <p>Nháº­p thÃ´ng tin Ä‘á»ƒ tiáº¿p tá»¥c nghe nháº¡c.</p>
        </div>

        <form id="loginForm">
          
          <div class="input-group">
            <label>TÃªn Ä‘Äƒng nháº­p / Email</label>
            <div class="input-wrapper">
              <i class="fa-regular fa-envelope"></i>
              <input type="text" id="email" placeholder="VÃ­ dá»¥: musiclover@gmail.com" required>
            </div>
          </div>

          <div class="input-group">
            <label>Máº­t kháº©u</label>
            <div class="input-wrapper">
              <i class="fa-solid fa-lock"></i>
              <input type="password" id="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
              <button type="button" class="eye-btn" id="togglePw"><i class="fa-regular fa-eye"></i></button>
            </div>
          </div>

          <div class="actions">
            <label style="display: flex; gap: 8px; align-items: center; cursor: pointer;">
              <input type="checkbox"> Ghi nhá»› tÃ´i
            </label>
            <a href="#">QuÃªn máº­t kháº©u?</a>
          </div>

          <button type="submit" class="submit-btn">ÄÄƒng nháº­p ngay</button>

          <div class="social-login">
            <div class="social-label">Hoáº·c Ä‘Äƒng nháº­p vá»›i</div>
            <div class="social-btns">
              <button type="button" class="social-btn" title="Google"><i class="fa-brands fa-google"></i></button>
              <button type="button" class="social-btn" title="Facebook"><i class="fa-brands fa-facebook-f"></i></button>
              <button type="button" class="social-btn" title="Apple"><i class="fa-brands fa-apple"></i></button>
            </div>
          </div>

          <p style="text-align: center; margin-top: 20px; font-size: 13px; color: var(--text-gray);">
            ChÆ°a cÃ³ tÃ i khoáº£n? <a href="register.html" style="color: var(--primary); font-weight: 600; text-decoration: none;">ÄÄƒng kÃ½ miá»…n phÃ­</a>
          </p>

        </form>
      </section>

    </main>

    <script>
      // 1. Logic áº©n/hiá»‡n máº­t kháº©u (Giá»¯ nguyÃªn)
      const toggleBtn = document.getElementById('togglePw');
      const passwordInput = document.getElementById('password');
      toggleBtn.addEventListener('click', () => {
        if (passwordInput.type === 'password') {
          passwordInput.type = 'text';
        } else {
          passwordInput.type = 'password';
        }
      });

      // 2. LOGIC ÄÄ‚NG NHáº¬P (CHECK Dá»® LIá»†U Tá»ª KHO)
      document.getElementById('loginForm').addEventListener('submit', (e) => {
        e.preventDefault();
        
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value;

        // --- Láº¤Y Dá»® LIá»†U Tá»ª LOCALSTORAGE ---
        // Láº¥y danh sÃ¡ch tÃ i khoáº£n Ä‘Ã£ Ä‘Äƒng kÃ½
        let users = JSON.parse(localStorage.getItem('musicWaveUsers')) || [];

        // TÃ¬m xem cÃ³ ai khá»›p Email vÃ  Máº­t kháº©u khÃ´ng
        const validUser = users.find(u => u.email === email && u.password === password);

        if (validUser) {
            // => ÄÄ‚NG NHáº¬P THÃ€NH CÃ”NG
            const btn = document.querySelector('.submit-btn');
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Äang Ä‘Äƒng nháº­p...';

            setTimeout(() => {
                // LÆ°u phiÃªn Ä‘Äƒng nháº­p hiá»‡n táº¡i (Ä‘á»ƒ trang chá»§ biáº¿t tÃªn ai)
                localStorage.setItem('currentUser', JSON.stringify(validUser));
                
                alert('ğŸ‰ Xin chÃ o ' + validUser.fullname + '! ÄÄƒng nháº­p thÃ nh cÃ´ng.');
                window.location.href = 'home.html'; // Chuyá»ƒn vá» trang chá»§
            }, 1000);

        } else {
            // => ÄÄ‚NG NHáº¬P THáº¤T Báº I
            alert('âŒ Sai email hoáº·c máº­t kháº©u! Hoáº·c tÃ i khoáº£n chÆ°a Ä‘Äƒng kÃ½.');
        }
      });
    </script>
  </body>
</html>